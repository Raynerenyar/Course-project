<div *ngIf="project" class="flex justify-content-center">
    <div class="flex flex-column gap-3 px-2 pb-2 row-gap-3 max-width" style="width: 80%">

        <!-- header -->
        <div class="flex base-card flex-row justify-content-between align-items-center pl-4">
            <div class="flex flex-column py-2">
                <div class="text-xl font-bold">
                    {{project.title | titlecase}}
                </div>
                <a class="text-sm" href="https://sepolia.etherscan.io/address/{{project.projectAddress}}" target="_blank">
                    {{project.projectAddress}}
                </a>
            </div>
            <!-- back button -->
            <div class="flex p-2 px-3 align-content-center">
                <p-button icon="pi pi-arrow-left" styleClass="p-button-raised p-button-rounded" label="Back" (click)="goBack()"></p-button>
            </div>
        </div>
        
        <!-- main body card -->
        <div class="flex flex-row gap-3 flex-wrap lg:flex-nowrap">
            <div class="flex flex-column w-9 gap-3 flex-grow-1 lg:flex-grow-0 xl:flex-grow-0">
    
    
                <!-- project stats card -->
                <div class="flex flex-row justify-content-between gap-3 flex-wrap lg:flex-nowrap xl:flex-nowrap">
                    
                    <!-- left -->
                    <div class="base-card w-auto p-3 px-4 sm:flex-grow-1">
                        <div>
                            <span class="font-semibold">Accepts</span> {{project.tokenSymbol}}
                        </div>
                        <div>
                            <a class="text-sm" href="https://sepolia.etherscan.io/address/{{project.acceptingToken}}" target="_blank">
                                {{project.acceptingToken}}
                            </a>    
                        </div>
                        <div>
                            Status: 
                            <span *ngIf="project.completed">Completed</span>
                            <span *ngIf="project.expired">Expired</span>
                            <span *ngIf="!project.expired && !project.completed">Ongoing</span>
                        </div>
                    </div>

                    <!-- right -->
                    <div class="base-card w-full p-3 px-4 sm:flex-grow-1 md:flex-grow-1">
                        <div class="flex justify-content-between">
                            <span class="font-semibold">Request Count: </span>
                            <span>{{project.numOfRequests}}</span>
                        </div>
                        <div class="flex justify-content-between">
                            <span class="font-semibold">Created Date:</span>
                            <span>{{project.createdDate | date: 'dd MMM yyyy'}}</span>
                        </div>
                        <div class="flex justify-content-between">
                            <span class="font-semibold">Deadline:</span>
                            <span>{{project.deadline | date: 'dd MMM yyyy'}}</span>
                        </div>
                    </div>
                </div>
        
                <!-- project details card -->
                <!-- <div class="flex flex-row gap-3"> -->
                    <div class="flex base-card">
                        <div class="flex flex-column gap-3 w-full p-2 pb-3">
                            <div class="mx-2 flex flex-column border-0">
                                <div class="grid grid-nogutter p-2">
                                    <div class="col-12 lg:col-6 text-sm">
                                        Raised Amount: {{raisedAmount | commaSeparated}} {{project.tokenSymbol}}
                                    </div>
                                    <div class="col-12 lg:col-6 text-sm px-2">
                                        Goal: {{project.goal | commaSeparated}} {{project.tokenSymbol}}
                                    </div>
                                </div>
                                <div class="p-2">
                                    <ng-container *ngIf="((raisedAmount/project.goal)*100) <= 100; else moreThan100">
                                        <p-progressBar [value]="((raisedAmount/project.goal)*100)"></p-progressBar>
                                        <!-- <p-progressBar [value]="50"></p-progressBar> -->
                                    </ng-container>
                                    <ng-template #moreThan100>
                                        <p-progressBar [value]="100"></p-progressBar>
                                    </ng-template>
                                </div>
                                <div class="p-2 text-justify" [innerHTML]="project.description"></div>
                            </div>
                        </div>
                    </div>
                <!-- </div> -->
            </div>
        
            <!-- sidebar card -->
            <div class="flex flex-column gap-3 w-3 flex-grow-1 lg:flex-grow-0 xl:flex-grow-0">

                <!-- announcement and comment navigation -->
                <div class="flex flex-row base-card p-2">
                <!-- <div class="flex flex-row gap-3 flex-grow-1 lg:flex-grow-0 xl:flex-grow-0"> -->
                    <p-button icon="campaign-white-icon" class="border-none flex w-full p-1" styleClass="custom-bg-accent w-full p-button-raised p-button-text border-none" pInputText pTooltip="Announcements" tooltipPosition="top" [showDelay]="600" (click)="goAnnouncement()"></p-button>
                    <p-button icon="new-note-white-icon" class="border-none flex w-full p-1" styleClass="custom-bg-accent w-full p-button-raised p-button-text border-none" pInputText pTooltip="New Request" tooltipPosition="top" [showDelay]="600" (click)="goNewReq()"></p-button>
                    <p-button icon="comment-white-icon" class="border-none flex w-full p-1" styleClass="custom-bg-accent w-full p-button-raised p-button-text border-none" pInputText pTooltip="Comments" tooltipPosition="top" [showDelay]="600" (click)="goComment()"></p-button>
                    <p-button icon="paid-white-icon" class="border-none flex w-full p-1" styleClass="custom-bg-accent w-full p-button-raised p-button-text border-none" pInputText pTooltip="Receive Contribution" tooltipPosition="top" [showDelay]="600" (click)="goComment()"></p-button>
                    <!-- <div class="button-card w-full flex justify-content-center p-2 custom-bg-accent" (click)="goAnnouncement()"
                        pInputText pTooltip="Announcemets" tooltipPosition="top" [showDelay]="600">
                        <div class="campaign-white-icon"></div>
                    </div> -->
                    <!-- <div class="button-card w-full flex-grow-1 lg:flex-grow-0 p-2 xl:flex-grow-0 flex justify-content-center align-items-center custom-bg-accent" (click)="goNewReq()"
                        pInputText pTooltip="New Request" tooltipPosition="top" [showDelay]="600">
                        <div class="new-note-white-icon"></div>
                    </div> -->
                    <!-- <div class="button-card w-full flex-grow-1 lg:flex-grow-0 p-2 xl:flex-grow-0 flex justify-content-center align-items-center custom-bg-accent" (click)="goComment()"
                        pInputText pTooltip="Comments" tooltipPosition="top" [showDelay]="600">
                        <div class="comment-white-icon"></div>
                    </div>                     -->
                <!-- </div> -->
                </div>


                <!-- request list card -->
                <div class="base-card w-full p-2">
                    <ng-container *ngIf="requests; else noRequest">
                        <!-- <p-scrollPanel [style]="{height: '100%'}"> -->
                            <div class="flex flex-column-reverse">
                                <span *ngFor="let request of requests">
                                    <div class="card p-2 m-2" (click)="getRequest(request.requestId)">
                                        <div class="font-semibold pb-2">
                                            {{request.title | titlecase}}
                                        </div>
                                        <div>
                                            {{request.description | truncate:[100,'...']}}
                                        </div>
                                    </div>
                                </span>
                            </div>
                        <!-- </p-scrollPanel> -->
                    </ng-container>
                </div>
            </div>
            </div>
    </div>
</div>

<ng-template #noRequest>
    <div class="p-2 m-2 font-semibold">
        {{'you have no request for this project' | titlecase}}
    </div>
</ng-template>
<!-- <div class="flex flex-row justify-content-center">
    <div class="flex gap-3" style="width: 1200px;">
        <div class="border-primary border-1" style="width: 80%;">
            <h2 class="px-2">Title</h2>
            <div class="flex flex-row px-2">
                <span style="width: 50%;">Raised Amount: $10,000</span>
                <span style="width: 50%;">Goal: $100,0001</span>
            </div>
            <div class="px-2">
                <p-progressBar [value]="50"></p-progressBar>
            </div>
        </div>
        <div class="flex flex-column row-gap-3" style="width: 20%">
            <div class="flex flex-row gap-3">
                <div class="border-primary border-1 text-xs" style="width: 50%; cursor: pointer;">New Announcement</div>
                <div class="border-primary border-1 text-xs" style="width: 50%; cursor: pointer;">New Request</div>
            </div>
            <div class="border-primary border-1 h-full">
                test
            </div>
        </div>
    </div>
    <div class="ml-2 mr-2">
        <span *ngIf="project">
            <h1>Project Overview</h1>
            <p-panel header="Title">
                <p>
                    {{project.title}}
                </p>
            </p-panel>
            <p-panel header="Descpition">
                <p>
                    {{project.description}}
                </p>
            </p-panel>
            <p-panel header="Raised Amount">
                <p>
                    {{project.raisedAmount}}
                </p>
            </p-panel>
            <p-panel header="Project Address">
                <p>
                    {{project.projectAddress}}
                </p>
            </p-panel>
        </span>
    </div>
</div> -->

